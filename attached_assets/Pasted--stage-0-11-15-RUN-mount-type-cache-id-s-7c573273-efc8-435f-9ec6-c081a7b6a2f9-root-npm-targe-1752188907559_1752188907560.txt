

[stage-0 11/15] RUN --mount=type=cache,id=s/7c573273-efc8-435f-9ec6-c081a7b6a2f9-/root/npm,target=/root/.npm npm ci  ✔ 10 secs

[stage-0 12/15] COPY . /app/.

[stage-0 12/15] COPY . /app/.  ✔ 200 ms

[stage-0 13/15] RUN --mount=type=cache,id=s/7c573273-efc8-435f-9ec6-c081a7b6a2f9-node_modules/cache,target=/app/node_modules/.cache npm install && vite build --config vite.config.production.ts && esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist

npm warn config production Use `--omit=dev` instead.


up to date, audited 519 packages in 3s


67 packages are looking for funding
  run `npm fund` for details


9 vulnerabilities (1 low, 8 moderate)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.

vite v5.4.19 building for production...

✓ 0 modules transformed.

x Build failed in 17ms

error during build:
Could not resolve entry module "client/index.html".
    at getRollupError (file:///app/node_modules/rollup/dist/es/shared/parseAst.js:396:41)
    at error (file:///app/node_modules/rollup/dist/es/shared/parseAst.js:392:42)
    at ModuleLoader.loadEntryModule (file:///app/node_modules/rollup/dist/es/shared/node-entry.js:20086:20)
    at async Promise.all (index 0)

✕ [stage-0 13/15] RUN --mount=type=cache,id=s/7c573273-efc8-435f-9ec6-c081a7b6a2f9-node_modules/cache,target=/app/node_modules/.cache npm install && vite build --config vite.config.production.ts && esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist 
process "/bin/bash -ol pipefail -c npm install && vite build --config vite.config.production.ts && esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist" did not complete successfully: exit code: 1
 

Dockerfile:30

-------------------

28 |     # build phase

29 |     COPY . /app/.

30 | >>> RUN --mount=type=cache,id=s/7c573273-efc8-435f-9ec6-c081a7b6a2f9-node_modules/cache,target=/app/node_modules/.cache npm install && vite build --config vite.config.production.ts && esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist

31 |

32 |

-------------------

ERROR: failed to build: failed to solve: process "/bin/bash -ol pipefail -c npm install && vite build --config vite.config.production.ts && esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist" did not complete successfully: exit code: 1

Error: Docker build failed
